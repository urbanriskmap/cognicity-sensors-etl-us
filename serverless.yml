service: cognicity-sensors-etl

custom:
  projectName: us-dev

provider:
  name: aws
  runtime: nodejs6.10
  stage: dev
  region: ${file(./env.yml):region}
  stackTags:
    area: ${file(./env.yml):areatag}

package:
  exclude: # Specify the directories and files which should be excluded in the deployment package
    - src/**
    - .git/**
    - .gitignore
    - README.md
    - .eslintrc.js
    - .babelrc
  # include package.individually: true tag to optimize package sizes

# Add one function for each Lambda
functions:
  etlGroundwaterSensor:
    handler: bin/functions/etl-sensors/usgs-generic.handler
    environment:
      API_KEY: ${file(./env.yml):apikey}
      SENSOR_TYPE: GW
      SENSOR_CODE: 62610
      SERVER_ENDPOINT: ${file(./env.yml):serverEndPoint}
  etlGaugeHeightSensor:
    handler: bin/functions/etl-sensors/usgs-generic.handler
    environment:
      API_KEY: ${file(./env.yml):apikey}
      SENSOR_TYPE: ST
      SENSOR_CODE: 00065
  etlDischargeRateSensor:
    handler: bin/functions/etl-sensors/usgs-generic.handler
    environment:
      API_KEY: ${file(./env.yml):apikey}
      SENSOR_TYPE: ST-CA
      SENSOR_CODE: 00060
  etlStreamElevationSensor:
    handler: bin/functions/etl-sensors/usgs-generic.handler
    environment:
      API_KEY: ${file(./env.yml):apikey}
      SENSOR_TYPE: ST-CA
      SENSOR_CODE: 63160
  etlPrecipitationSensor:
    handler: bin/functions/etl-sensors/usgs-generic.handler
    environment:
      API_KEY: ${file(./env.yml):apikey}
      SENSOR_TYPE: ST
      SENSOR_CODE: 00045
